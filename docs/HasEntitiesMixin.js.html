<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: HasEntitiesMixin.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: HasEntitiesMixin.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Mixin = require('./Mixin')

// const Scene = require('./Scene')

/**
 * HasEntitiesMixin is a {@link Mixin} to add a collection of {@link Entity} objects to a class.
 * @hideconstructor
 */
class HasEntitiesMixin {
  static init (obj, options = {}) {
    obj._entities = {}
  }

  /**
	* Add a entity to this container with the given name.
	* @param {String} name The name to assign to the entity
	* @param {Entity} entity The Entity to add
	*/
  addEntity (name, entity) {
    this._entities[name] = entity
    entity.name = name
    if (entity.parent &amp;&amp; entity.parent.removeEntity) entity.parent.removeEntity(name)
    entity.parent = this
    return entity
  }

  /**
	* Remove a named entity from this container, will trigger a redraw if defined on the container class
	* @param {String} name The name of the entity to remove
	*/
  removeEntity (name) {
    delete this._entities[name]
    if (this.redraw) this.redraw()
  }

  /**
	* Return the entity with the given name. Throws an exception if the entity is not found.
	* @param {String} name The name of the entity to return
	* @returns {Entity} The Entity with the given name if found
	* @throws {Exception} 'Entity not found' if the entity is not found
	*/
  getEntity (name) {
    if (!this._entities[name]) throw 'Entity not found: ' + name
    return this._entities[name]
  }

  /**
	* Draw entities
	* @param {CanvasRenderingContext2D} context The context in which to draw
	*/
  drawEntities (context) {
    // Draw Entities
    var entities
    if (this.perspectiveMode == HasEntitiesMixin.PERSPECTIVE_ANGLE) {
      entities = Object.values(this._entities).sort(function (a, b) { return (a.y + a.hotspotY > b.y + b.hotspotY) ? 1 : -1 })
    }
    if (this.perspectiveMode == HasEntitiesMixin.PERSPECTIVE_OVERHEAD) {
      entities = Object.values(this._entities).sort(function (a, b) { return (a.z > b.z) ? 1 : -1 })
    }
    for (var i in entities) entities[i].draw(context)
  }

  /**
	* Call redraw on all entities in this container by calling [redraw()]{@link Entity#redraw}
	*/
  redrawEntities () {
    for (var i in this._entities) this._entities[i].redraw()
  }
}

HasEntitiesMixin.PERSPECTIVE_OVERHEAD = 1
HasEntitiesMixin.PERSPECTIVE_ANGLE = 2

module.exports = Mixin.export(HasEntitiesMixin)
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Asset.html">Asset</a></li><li><a href="Audio.html">Audio</a></li><li><a href="BackgroundScene.html">BackgroundScene</a></li><li><a href="Entity.html">Entity</a></li><li><a href="GameEngine.html">GameEngine</a></li><li><a href="HasEntitiesMixin.html">HasEntitiesMixin</a></li><li><a href="HasEventsMixin.html">HasEventsMixin</a></li><li><a href="HasScenesMixin.html">HasScenesMixin</a></li><li><a href="Logger.html">Logger</a></li><li><a href="Mixin.html">Mixin</a></li><li><a href="Scene.html">Scene</a></li><li><a href="TiledScene.html">TiledScene</a></li><li><a href="Util.html">Util</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
