<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: BackgroundScene.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: BackgroundScene.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Scene = require('./Scene')

/**
 * BackgroundScene is the base class for static backgrounds.
 *
 * @extends Scene
 * @example
 &lt;caption>Create a new BackgroundScene from an {@link Asset}&lt;/caption>
var mainMapBackgroundAsset = new Asset({ name: 'mainMapBackgroundAsset', src: 'assets/mainmap_background.png' })
var scene = new BackgroundScene({ asset: mainMapBackgroundAsset, x: 0, y: 0 })
 */
class BackgroundScene extends Scene {
	/**
	* Create a new BackgroundScene with the specified options.
	* @param {object} options The options for the BackgroundScene, composed of the properties.
	* @property {integer} offsetX The offset x-coordinate in the asset in pixels (optional, default 0)
	* @property {integer} offsetY The offset y-coordinate in the asset in pixels (optional, default 0)
	* @property {integer} width The width in pixels (optional, default asset width)
	* @property {integer} height The height in pixels (optional, default asset height)
	*/
	constructor(options = {}) {
		super(options)

		this.offsetX = options.offsetX || 0
		this.offsetY = options.offsetY || 0

		this.width = options.width
		this.height = options.height
		if (typeof(this.width)==='undefined' &amp;&amp; this.asset) this.width = this.asset.element.width
		if (typeof(this.height)==='undefined' &amp;&amp; this.asset) this.height = this.asset.element.height
	}

	/**
	* Draw the BackgroundScene into the given context
	* @param {CanvasRenderingContext2D} context The context in which to draw
	*/
	draw(context) {
		// If we're not marked for a redraw or we're invisible, return
		if(!this._doredraw || !this.visible) return

		// Save the context params
		context.save()

		// Reset the origin to our coordinates (so child entities are relative to us)
		context.translate(this.x, this.y)
		context.scale(this.scale, this.scale)
		context.rotate(this.rotate)

		// Ensure Scene sort order
		if(!this._sceneOrderMap) this.sortScenesZ()

		// Ensure entity sort order
		if(!this._entityOrderMap) this.sortEntitiesZ()

		// Get all valid z values for layers, scenes and entities
		var layerKeys = Object.assign({}, this.layers)
		Object.assign(layerKeys, this._sceneOrderMap)
		Object.assign(layerKeys, this._entityOrderMap)
		layerKeys = Object.keys(layerKeys).sort()

		// Draw Background Image
		context.drawImage(
			this.asset.element, 
			this.offsetX,
			this.offsetY,
			this.width, 
			this.height,
			0, 
			0,
			this.width, 
			this.height
		)

		// Restore the context params for the next thing being drawn
		context.restore()

		// Now the Entities for this layer
		this.drawEntities(context)
		
		// Next draw any subscenes for this layer
		this.drawScenes(context)

		// Reset the redraw flag
		this._doredraw = false
	}
}

module.exports = BackgroundScene
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Asset.html">Asset</a></li><li><a href="Audio.html">Audio</a></li><li><a href="BackgroundScene.html">BackgroundScene</a></li><li><a href="Entity.html">Entity</a></li><li><a href="GameEngine.html">GameEngine</a></li><li><a href="HasEntitiesMixin.html">HasEntitiesMixin</a></li><li><a href="HasEventsMixin.html">HasEventsMixin</a></li><li><a href="HasScenesMixin.html">HasScenesMixin</a></li><li><a href="Logger.html">Logger</a></li><li><a href="Mixin.html">Mixin</a></li><li><a href="Scene.html">Scene</a></li><li><a href="TiledScene.html">TiledScene</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
